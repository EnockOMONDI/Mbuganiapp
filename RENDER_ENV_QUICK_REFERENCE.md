# üìã Render.com Environment Variables - Quick Reference

## Mbugani Luxe Adventures - Complete Variable List

---

## ‚úÖ **REQUIRED VARIABLES** (Must be set before deployment)

| Variable | Value | Where to Get It |
|----------|-------|-----------------|
| `DJANGO_SETTINGS_MODULE` | `tours_travels.settings_prod` | Fixed value |
| `SECRET_KEY` | `[Generate new]` | Run: `python -c 'from django.core.management.utils import get_random_secret_key; print(get_random_secret_key())'` |
| `DJANGO_ENV` | `production` | Fixed value |
| `DEBUG` | `False` | Fixed value |
| `PYTHON_VERSION` | `3.12.0` | Fixed value |
| `DATABASE_URL` | `postgresql://postgres.zgwfxeemdgfryiulbapx:JDuH37tYEfVuPpX!@aws-1-eu-west-1.pooler.supabase.com:6543/postgres` | Supabase Dashboard > Settings > Database > Connection Pooling |
| `ALLOWED_HOSTS` | `www.mbuganiluxeadventures.com,mbuganiluxeadventures.com,YOUR_APP.onrender.com` | Replace YOUR_APP with your Render subdomain |
| `CSRF_TRUSTED_ORIGINS` | `https://www.mbuganiluxeadventures.com,https://mbuganiluxeadventures.com,https://YOUR_APP.onrender.com` | Replace YOUR_APP with your Render subdomain |
| `SITE_URL` | `https://www.mbuganiluxeadventures.com` | Your primary domain |
| `DEFAULT_FROM_EMAIL` | `Mbugani Luxe Adventures <info@mbuganiluxeadventures.com>` | Fixed value |
| `ADMIN_EMAIL` | `info@mbuganiluxeadventures.com` | Fixed value |
| `JOBS_EMAIL` | `careers@mbuganiluxeadventures.com` | Fixed value |
| `NEWSLETTER_EMAIL` | `news@mbuganiluxeadventures.com` | Fixed value |
| `UPLOADCARE_PUBLIC_KEY` | `6fb55bb425b16d386db6` | Fixed value (Mbugani credentials) |
| `UPLOADCARE_SECRET_KEY` | `3086089d3d2ac096684d` | Fixed value (Mbugani credentials) |
| `SECURE_SSL_REDIRECT` | `True` | Fixed value |
| `SESSION_COOKIE_SECURE` | `True` | Fixed value |
| `CSRF_COOKIE_SECURE` | `True` | Fixed value |

---

## ‚öôÔ∏è **RECOMMENDED VARIABLES** (Should be set)

| Variable | Value | Purpose |
|----------|-------|---------|
| `MAILTRAP_API_TOKEN` | `956b51c090fc5c1320bca0c26a394fd5` | Email sending via Mailtrap HTTP API |
| `WEB_CONCURRENCY` | `3` | Number of Gunicorn workers |
| `GUNICORN_WORKERS` | `3` | Number of Gunicorn workers |
| `GUNICORN_TIMEOUT` | `240` | Gunicorn timeout (increased for email) |
| `DB_CONN_MAX_AGE` | `600` | Database connection pooling |
| `DB_CONN_HEALTH_CHECKS` | `True` | Database health checks |
| `SESSION_COOKIE_HTTPONLY` | `True` | Cookie security |
| `CSRF_COOKIE_HTTPONLY` | `True` | Cookie security |
| `SECURE_HSTS_SECONDS` | `31536000` | HSTS security (1 year) |
| `SECURE_HSTS_INCLUDE_SUBDOMAINS` | `True` | HSTS for subdomains |
| `SECURE_HSTS_PRELOAD` | `True` | HSTS preload |

---

## üåç **REGIONAL & BUSINESS SETTINGS** (Optional but recommended)

| Variable | Value | Purpose |
|----------|-------|---------|
| `TIME_ZONE` | `Africa/Nairobi` | Server timezone |
| `DEFAULT_LANGUAGE` | `en` | Default language |
| `LANGUAGE_CODE` | `en-us` | Language code |
| `DEFAULT_COUNTRY` | `Kenya` | Default country |
| `DEFAULT_CURRENCY` | `USD` | Default currency |
| `WHATSAPP_PHONE` | `+254701363551` | WhatsApp contact |
| `DEFAULT_BOOKING_EXPIRY_HOURS` | `24` | Booking expiry time |
| `MAX_BOOKING_ADULTS` | `20` | Max adults per booking |
| `MAX_BOOKING_CHILDREN` | `15` | Max children per booking |
| `MAX_BOOKING_ROOMS` | `10` | Max rooms per booking |

---

## üöÄ **PERFORMANCE SETTINGS** (Optional)

| Variable | Value | Purpose |
|----------|-------|---------|
| `FILE_UPLOAD_MAX_MEMORY_SIZE` | `5242880` | Max file upload size (5MB) |
| `DATA_UPLOAD_MAX_MEMORY_SIZE` | `5242880` | Max data upload size (5MB) |
| `SESSION_COOKIE_AGE` | `86400` | Session duration (24 hours) |

---

## üéØ **FEATURE FLAGS** (Optional)

| Variable | Value | Purpose |
|----------|-------|---------|
| `ENABLE_BOOKING_NOTIFICATIONS` | `True` | Enable booking notifications |
| `ENABLE_EMAIL_MARKETING` | `True` | Enable email marketing |
| `ENABLE_ANALYTICS` | `True` | Enable analytics |
| `ENABLE_CHAT_SUPPORT` | `False` | Enable chat support |

---

## üìä **MONITORING** (Optional)

| Variable | Value | Purpose |
|----------|-------|---------|
| `SENTRY_DSN` | `[Your Sentry DSN]` | Error monitoring (optional) |
| `GOOGLE_ANALYTICS_ID` | `[Your GA ID]` | Analytics tracking (optional) |

---

## üö´ **DO NOT SET** (Auto-generated by Render)

| Variable | Why Not |
|----------|---------|
| `PORT` | Automatically generated by Render |
| `RENDER_EXTERNAL_HOSTNAME` | Automatically generated by Render |

---

## üìù **TOTAL COUNT**

- **Required Variables**: 19
- **Recommended Variables**: 11
- **Optional Variables**: 18
- **Total Variables**: 48

---

## üéØ **QUICK START - 3 STEPS**

### **Step 1: Generate Secret Key**
```bash
python -c 'from django.core.management.utils import get_random_secret_key; print(get_random_secret_key())'
```

### **Step 2: Find Your Render Subdomain**
- Go to Render Dashboard
- Find your app URL (e.g., `mbuganiapp.onrender.com`)
- Replace `YOUR_APP` in the variables with `mbuganiapp`

### **Step 3: Copy Variables to Render**
- Open `RENDER_ENV_MINIMAL.txt`
- Copy all variables
- Go to Render Dashboard > Environment
- Add each variable

---

## ‚ö†Ô∏è **IMPORTANT NOTES**

### **Database URL**
- ‚úÖ **MUST** use port **6543** (Connection Pooling)
- ‚ùå **DO NOT** use port **5432** (Direct Connection)
- Format: `postgresql://USER:PASSWORD@HOST:6543/postgres`

### **CSRF Trusted Origins**
- ‚úÖ **MUST** include `https://` prefix
- ‚ùå **DO NOT** forget the protocol
- Example: `https://www.mbuganiluxeadventures.com`

### **Allowed Hosts**
- ‚úÖ **MUST** include all domains (with and without www)
- ‚úÖ **MUST** include Render subdomain
- ‚ùå **DO NOT** include `https://` prefix
- Example: `www.mbuganiluxeadventures.com,mbuganiluxeadventures.com,mbuganiapp.onrender.com`

### **Security Settings**
- ‚úÖ All security settings **MUST** be `True` in production
- ‚úÖ `DEBUG` **MUST** be `False` in production
- ‚úÖ `DJANGO_ENV` **MUST** be `production`

### **Email Configuration**
- ‚úÖ Using Mailtrap HTTP API (synchronous)
- ‚úÖ `MAILTRAP_API_TOKEN` is hardcoded in `settings_prod.py`
- ‚úÖ Can override by setting environment variable
- ‚ö†Ô∏è Email sending adds 1-4 second delay to forms

### **Uploadcare Credentials**
- ‚úÖ These are the **NEW** Mbugani Luxe Adventures credentials
- ‚úÖ Public key: `6fb55bb425b16d386db6`
- ‚úÖ Secret key: `3086089d3d2ac096684d`
- ‚ùå **DO NOT** use old Novustell credentials

---

## üìö **RELATED FILES**

1. **`.env.render.example`** - Complete reference with all variables and detailed comments
2. **`RENDER_ENV_MINIMAL.txt`** - Copy-paste ready format with all variables
3. **`RENDER_ENV_SETUP_GUIDE.md`** - Detailed setup guide with explanations
4. **`RENDER_DEPLOYMENT_STEPS.md`** - Complete deployment walkthrough

---

## ‚úÖ **VERIFICATION CHECKLIST**

Before deploying, verify:

- [ ] `SECRET_KEY` is generated and unique
- [ ] `DATABASE_URL` uses port 6543 (pooling)
- [ ] `ALLOWED_HOSTS` includes your Render subdomain
- [ ] `CSRF_TRUSTED_ORIGINS` has `https://` prefix
- [ ] `DEBUG` is set to `False`
- [ ] `DJANGO_ENV` is set to `production`
- [ ] All security settings are `True`
- [ ] Email addresses are correct
- [ ] Uploadcare credentials are correct
- [ ] `MAILTRAP_API_TOKEN` is correct

---

## üÜò **TROUBLESHOOTING**

### **Issue: Database connection failed**
- ‚úÖ Check `DATABASE_URL` is correct
- ‚úÖ Verify using port 6543 (not 5432)
- ‚úÖ Check password is correct

### **Issue: CSRF verification failed**
- ‚úÖ Check `CSRF_TRUSTED_ORIGINS` has `https://` prefix
- ‚úÖ Verify all domains are listed
- ‚úÖ Clear browser cookies

### **Issue: Static files not loading**
- ‚úÖ Check `ALLOWED_HOSTS` includes your domain
- ‚úÖ Verify `collectstatic` ran successfully in build logs

### **Issue: Emails not sending**
- ‚úÖ Check `MAILTRAP_API_TOKEN` is correct
- ‚úÖ Verify email addresses are valid
- ‚úÖ Check Render logs for errors

---

**Last Updated**: 2025-10-17  
**Version**: 1.0 (Mailtrap HTTP API Migration)  
**Total Variables**: 48 (19 required, 11 recommended, 18 optional)

